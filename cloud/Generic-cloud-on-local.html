<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Use Generic Cloud (cloud-init) image on local | AlmaLinux Wiki</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/png" href="/images/logo.png">
    <meta name="description" content="AlmaLinux OS Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.dc760ce6.css" as="style"><link rel="preload" href="/assets/js/app.d57a9934.js" as="script"><link rel="preload" href="/assets/js/2.b4b7b8f8.js" as="script"><link rel="preload" href="/assets/js/19.05f283d6.js" as="script"><link rel="prefetch" href="/assets/js/10.74672cd8.js"><link rel="prefetch" href="/assets/js/11.6268da0f.js"><link rel="prefetch" href="/assets/js/12.d8b7ca68.js"><link rel="prefetch" href="/assets/js/13.95204515.js"><link rel="prefetch" href="/assets/js/14.606c2764.js"><link rel="prefetch" href="/assets/js/15.4acea607.js"><link rel="prefetch" href="/assets/js/16.fa761906.js"><link rel="prefetch" href="/assets/js/17.e446ce17.js"><link rel="prefetch" href="/assets/js/18.ddae81a5.js"><link rel="prefetch" href="/assets/js/20.21ef9520.js"><link rel="prefetch" href="/assets/js/21.42bc8ca2.js"><link rel="prefetch" href="/assets/js/22.f6bf9af2.js"><link rel="prefetch" href="/assets/js/23.e2c3731f.js"><link rel="prefetch" href="/assets/js/24.9b68b445.js"><link rel="prefetch" href="/assets/js/25.8089033b.js"><link rel="prefetch" href="/assets/js/26.1bf41f3a.js"><link rel="prefetch" href="/assets/js/27.2f92bd2e.js"><link rel="prefetch" href="/assets/js/28.a7d74530.js"><link rel="prefetch" href="/assets/js/29.63a0d893.js"><link rel="prefetch" href="/assets/js/3.5f6e2cbb.js"><link rel="prefetch" href="/assets/js/30.feb6687f.js"><link rel="prefetch" href="/assets/js/31.f9226834.js"><link rel="prefetch" href="/assets/js/32.510fb472.js"><link rel="prefetch" href="/assets/js/33.3df78a90.js"><link rel="prefetch" href="/assets/js/34.dee61bda.js"><link rel="prefetch" href="/assets/js/35.ccb8856c.js"><link rel="prefetch" href="/assets/js/36.767bd082.js"><link rel="prefetch" href="/assets/js/37.f5660000.js"><link rel="prefetch" href="/assets/js/38.5d872356.js"><link rel="prefetch" href="/assets/js/39.24450013.js"><link rel="prefetch" href="/assets/js/4.afa6acae.js"><link rel="prefetch" href="/assets/js/40.773b07f5.js"><link rel="prefetch" href="/assets/js/41.8296e37b.js"><link rel="prefetch" href="/assets/js/42.cae5a58d.js"><link rel="prefetch" href="/assets/js/43.eb958b8b.js"><link rel="prefetch" href="/assets/js/44.a3acb4b2.js"><link rel="prefetch" href="/assets/js/45.3df290a4.js"><link rel="prefetch" href="/assets/js/46.8dea27bc.js"><link rel="prefetch" href="/assets/js/47.ce85fce7.js"><link rel="prefetch" href="/assets/js/48.f72566af.js"><link rel="prefetch" href="/assets/js/49.fdfdc9e2.js"><link rel="prefetch" href="/assets/js/5.370b5766.js"><link rel="prefetch" href="/assets/js/50.0006c318.js"><link rel="prefetch" href="/assets/js/51.795d376a.js"><link rel="prefetch" href="/assets/js/52.02eb8c64.js"><link rel="prefetch" href="/assets/js/53.6b64d1bf.js"><link rel="prefetch" href="/assets/js/54.23193dd2.js"><link rel="prefetch" href="/assets/js/55.e4c977bc.js"><link rel="prefetch" href="/assets/js/56.48ab2f63.js"><link rel="prefetch" href="/assets/js/57.2b7c2250.js"><link rel="prefetch" href="/assets/js/58.33e08e31.js"><link rel="prefetch" href="/assets/js/59.9fd4d617.js"><link rel="prefetch" href="/assets/js/6.5f7310db.js"><link rel="prefetch" href="/assets/js/60.18253e4b.js"><link rel="prefetch" href="/assets/js/7.1471559e.js"><link rel="prefetch" href="/assets/js/8.9d94c992.js"><link rel="prefetch" href="/assets/js/9.1a782e8b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dc760ce6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="AlmaLinux Wiki" class="logo"> <span class="site-name can-hide">AlmaLinux Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">AlmaLinux Wiki</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Documentation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Cloud</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cloud/AWS.html" class="sidebar-link">AWS</a></li><li><a href="/cloud/Azure.html" class="sidebar-link">Azure</a></li><li><a href="/cloud/Google.html" class="sidebar-link">Google Cloud</a></li><li><a href="/cloud/Generic-cloud.html" class="sidebar-link">Generic Cloud (cloud-init)</a></li><li><a href="/cloud/Generic-cloud-on-local.html" aria-current="page" class="active sidebar-link">Use Generic Cloud (cloud-init) image on local</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cloud/Generic-cloud-on-local.html#almalinux-guest-os-support" class="sidebar-link">AlmaLinux Guest OS support</a></li><li class="sidebar-sub-header"><a href="/cloud/Generic-cloud-on-local.html#create-a-snapshot-from-the-image" class="sidebar-link">Create a snapshot from the image</a></li><li class="sidebar-sub-header"><a href="/cloud/Generic-cloud-on-local.html#cloud-init" class="sidebar-link">Cloud-init</a></li><li class="sidebar-sub-header"><a href="/cloud/Generic-cloud-on-local.html#static-ip" class="sidebar-link">Static IP</a></li><li class="sidebar-sub-header"><a href="/cloud/Generic-cloud-on-local.html#repackage-cloud-image" class="sidebar-link">Repackage cloud image</a></li></ul></li><li><a href="/cloud/OpenNebula.html" class="sidebar-link">OpenNebula</a></li><li><a href="/cloud/OCI.html" class="sidebar-link">Oracle Cloud Infrastructure</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/LiveMedia.html" class="sidebar-link">Live Media</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/sigs/" class="sidebar-heading clickable"><span>Special interest groups</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/repos/" class="sidebar-heading clickable"><span>Repositories</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Development</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Mirrors.html" class="sidebar-link">Mirrors</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/elevate/" class="sidebar-heading clickable"><span>ELevate Project</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/Comparison.html" class="sidebar-link">EL8 Distro Comparison</a></li><li><a href="/Howto.html" class="sidebar-link">Howto Guides</a></li><li><a href="/Contribute.html" class="sidebar-link">Contribute</a></li><li><a href="/gsoc.html" class="sidebar-link">Google Summer of Code</a></li><li><a href="/Transparency.html" class="sidebar-link">The AlmaLinux OS Foundation</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="use-generic-cloud-cloud-init-image-on-local"><a href="#use-generic-cloud-cloud-init-image-on-local" class="header-anchor">#</a> Use Generic Cloud (cloud-init) image on local</h1> <p>You can use the Generic Cloud image for testing, developing and repackaging purposes on your local machine or server.</p> <h2 id="almalinux-guest-os-support"><a href="#almalinux-guest-os-support" class="header-anchor">#</a> AlmaLinux Guest OS support</h2> <p>You need at least the <code>20210215</code> on AlmaLinux and <code>20210426</code> version on the other distro's <code>osinfo-db</code> package for the AlmaLinux Guest OS support.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>20210621</code> and newer recommended for latest improvements.</p></div> <p>Check the list of supported guest OSes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ osinfo-query os

 Short ID             <span class="token operator">|</span> Name                                               <span class="token operator">|</span> Version  <span class="token operator">|</span> ID
----------------------+----------------------------------------------------+----------+-----------------------------------------
 almalinux8           <span class="token operator">|</span> AlmaLinux <span class="token number">8</span>                                        <span class="token operator">|</span> <span class="token number">8</span>        <span class="token operator">|</span> http://almalinux.org/almalinux/8
 alpinelinux3.10      <span class="token operator">|</span> Alpine Linux <span class="token number">3.10</span>                                  <span class="token operator">|</span> <span class="token number">3.10</span>     <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.10
 alpinelinux3.11      <span class="token operator">|</span> Alpine Linux <span class="token number">3.11</span>                                  <span class="token operator">|</span> <span class="token number">3.11</span>     <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.11
 alpinelinux3.12      <span class="token operator">|</span> Alpine Linux <span class="token number">3.12</span>                                  <span class="token operator">|</span> <span class="token number">3.12</span>     <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.12
 alpinelinux3.13      <span class="token operator">|</span> Alpine Linux <span class="token number">3.13</span>                                  <span class="token operator">|</span> <span class="token number">3.13</span>     <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.13
 alpinelinux3.14      <span class="token operator">|</span> Alpine Linux <span class="token number">3.14</span>                                  <span class="token operator">|</span> <span class="token number">3.14</span>     <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.14
 alpinelinux3.5       <span class="token operator">|</span> Alpine Linux <span class="token number">3.5</span>                                   <span class="token operator">|</span> <span class="token number">3.5</span>      <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.5
 alpinelinux3.6       <span class="token operator">|</span> Alpine Linux <span class="token number">3.6</span>                                   <span class="token operator">|</span> <span class="token number">3.6</span>      <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.6
 alpinelinux3.7       <span class="token operator">|</span> Alpine Linux <span class="token number">3.7</span>                                   <span class="token operator">|</span> <span class="token number">3.7</span>      <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.7
 alpinelinux3.8       <span class="token operator">|</span> Alpine Linux <span class="token number">3.8</span>                                   <span class="token operator">|</span> <span class="token number">3.8</span>      <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.8
 alpinelinux3.9       <span class="token operator">|</span> Alpine Linux <span class="token number">3.9</span>                                   <span class="token operator">|</span> <span class="token number">3.9</span>      <span class="token operator">|</span> http://alpinelinux.org/alpinelinux/3.9
 alt.p8               <span class="token operator">|</span> ALT p8 StarterKits                                 <span class="token operator">|</span> p8       <span class="token operator">|</span> http://altlinux.org/alt/p8.starterkits
 alt.p9               <span class="token operator">|</span> ALT p9 StarterKits                                 <span class="token operator">|</span> p9       <span class="token operator">|</span> http://altlinux.org/alt/p9.starterkits
 alt.sisyphus         <span class="token operator">|</span> ALT regular                                        <span class="token operator">|</span> sisyphus <span class="token operator">|</span> http://altlinux.org/alt/sisyphus
 alt8.0               <span class="token operator">|</span> ALT <span class="token number">8</span> Education                                    <span class="token operator">|</span> <span class="token number">8.0</span>      <span class="token operator">|</span> http://altlinux.org/alt/8.0
 alt8.1               <span class="token operator">|</span> ALT <span class="token number">8.1</span>                                            <span class="token operator">|</span> <span class="token number">8.1</span>      <span class="token operator">|</span> http://altlinux.org/alt/8.1
 alt8.2               <span class="token operator">|</span> ALT <span class="token number">8.2</span>                                            <span class="token operator">|</span> <span class="token number">8.2</span>      <span class="token operator">|</span> http://altlinux.org/alt/8.2
 alt9.0               <span class="token operator">|</span> ALT <span class="token number">9.0</span>                                            <span class="token operator">|</span> <span class="token number">9.0</span>      <span class="token operator">|</span> http://altlinux.org/alt/9.0
 alt9.1               <span class="token operator">|</span> ALT <span class="token number">9.1</span>                                            <span class="token operator">|</span> <span class="token number">9.1</span>      <span class="token operator">|</span> http://altlinux.org/alt/9.1
 altlinux1.0          <span class="token operator">|</span> Mandrake RE Spring <span class="token number">2001</span>                            <span class="token operator">|</span> <span class="token number">1.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/1.0
 altlinux2.0          <span class="token operator">|</span> ALT Linux <span class="token number">2.0</span>                                      <span class="token operator">|</span> <span class="token number">2.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/2.0
 altlinux2.2          <span class="token operator">|</span> ALT Linux <span class="token number">2.2</span>                                      <span class="token operator">|</span> <span class="token number">2.2</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/2.2
 altlinux2.4          <span class="token operator">|</span> ALT Linux <span class="token number">2.4</span>                                      <span class="token operator">|</span> <span class="token number">2.4</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/2.4
 altlinux3.0          <span class="token operator">|</span> ALT Linux <span class="token number">3.0</span>                                      <span class="token operator">|</span> <span class="token number">3.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/3.0
 altlinux4.0          <span class="token operator">|</span> ALT Linux <span class="token number">4.0</span>                                      <span class="token operator">|</span> <span class="token number">4.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/4.0
 altlinux4.1          <span class="token operator">|</span> ALT Linux <span class="token number">4.1</span>                                      <span class="token operator">|</span> <span class="token number">4.1</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/4.1
 altlinux5.0          <span class="token operator">|</span> ALT Linux <span class="token number">5.0</span>                                      <span class="token operator">|</span> <span class="token number">5.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/5.0
 altlinux6.0          <span class="token operator">|</span> ALT Linux <span class="token number">6.0</span>                                      <span class="token operator">|</span> <span class="token number">6.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/6.0
 altlinux7.0          <span class="token operator">|</span> ALT Linux <span class="token number">7.0</span>                                      <span class="token operator">|</span> <span class="token number">7.0</span>      <span class="token operator">|</span> http://altlinux.org/altlinux/7.0

<span class="token punctuation">..</span>.
</code></pre></div><p>You can manually update the Osinfo database with the <code>--local</code> option without overriding the osinfo-db which is installed by the distribution's package manager. The new database will have precedence when the database is loaded.</p> <p>Check the latest version from here: <a href="https://releases.pagure.org/libosinfo/?C=M;O=D" target="_blank" rel="noopener noreferrer">https://releases.pagure.org/libosinfo/?C=M;O=D<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Replace $VERSION with the latest version</span>
$ <span class="token function">curl</span> -O https://releases.pagure.org/libosinfo/osinfo-db-<span class="token variable">$VERSION</span>.tar.xz <span class="token comment"># Download</span>
$ <span class="token function">sudo</span> osinfo-db-import --local osinfo-db-<span class="token variable">$VERSION</span>.tar.xz <span class="token comment">#Install</span>
</code></pre></div><p>Download and Verify the cloud image from this guide: <a href="https://wiki.almalinux.org/cloud/Generic-cloud.html#download-and-verification" target="_blank" rel="noopener noreferrer">https://wiki.almalinux.org/cloud/Generic-cloud.html#download-and-verification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="create-a-snapshot-from-the-image"><a href="#create-a-snapshot-from-the-image" class="header-anchor">#</a> Create a snapshot from the image</h2> <p>If you don't want to modify the cloud image on each VM creation, you can create a snapshot from the cloud image. The snapshot's virtual size can be different from the base image. In this example, we will use 20G instead of the base image's virtual size (10G). Cloud-init will grow the root filesystem automatically on the creation of the VM.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ qemu-img create -f qcow2 -b AlmaLinux-8-GenericCloud-8.4-20210616.x86_64.qcow2 -F qcow2 wiki-almalinux84-snapshot.qcow2 20G
</code></pre></div><h2 id="cloud-init"><a href="#cloud-init" class="header-anchor">#</a> Cloud-init</h2> <p>The <a href="https://cloudinit.readthedocs.io/en/latest/topics/datasources/nocloud.html" target="_blank" rel="noopener noreferrer">NoCloud<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Datasource allows the user to provide User-data and Meta-data to the instance without running a network service (or even without having a network at all). You can provide Meta-data and User-data files with <code>--cloud-init</code> option of <a href="https://virt-manager.org/" target="_blank" rel="noopener noreferrer">virt-install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> &gt;= 3.0.0 or with a ISO file for &lt; 3.0.0.</p> <p>The accounts on the cloud image locked by default. You can set a password with the <a href="https://cloudinit.readthedocs.io/en/latest/topics/modules.html#set-passwords" target="_blank" rel="noopener noreferrer">Set Password<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, add your ssh public key with <a href="https://cloudinit.readthedocs.io/en/latest/topics/modules.html#authorized-keys" target="_blank" rel="noopener noreferrer">Authorized Keys<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. In this example, we will set a password for the default <code>almalinux</code> user.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Check cloud-init modules <a href="https://cloudinit.readthedocs.io/en/latest/topics/modules.html#" target="_blank" rel="noopener noreferrer">list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for further customization options.</p></div> <p><code>user-data:</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">#cloud-config</span>

<span class="token key atrule">ssh_pwauth</span><span class="token punctuation">:</span> yes <span class="token comment">#  sshd will be configured to accept password authentication</span>
<span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">'P@$$W0RD'</span> <span class="token comment"># Set a password for almalinux Cloud User</span>
<span class="token key atrule">chpasswd</span><span class="token punctuation">:</span>
    <span class="token key atrule">expire</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">ssh_authorized_keys</span><span class="token punctuation">:</span> <span class="token comment"># Add your ssh public key for publickey authentication </span>
    <span class="token punctuation">-</span> ssh<span class="token punctuation">-</span>rsa AAAAB3NzaC1yc2EAAAABIwAAAGEA3FSyQwBI6Z+nCSjUU <span class="token punctuation">...</span>
    <span class="token punctuation">-</span> ssh<span class="token punctuation">-</span>rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA3I7VUf2l5gSn5uavROsc5HRDpZ <span class="token punctuation">...</span>

</code></pre></div><p>Start the VM - <code>virt-install &gt;= 3.0.0</code> with <code>--cloud-init</code> option:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token assign-left variable">VM_NAME</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84&quot;</span>
<span class="token assign-left variable">USER_DATA</span><span class="token operator">=</span><span class="token string">&quot;user-data&quot;</span>
<span class="token assign-left variable">DISK</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84-snapshot.qcow2&quot;</span>


virt-install <span class="token punctuation">\</span>
--name <span class="token string">&quot;<span class="token variable">${VM_NAME}</span>&quot;</span> <span class="token punctuation">\</span>
--memory <span class="token number">2048</span> <span class="token punctuation">\</span>
--vcpus <span class="token number">2</span> <span class="token punctuation">\</span>
--import <span class="token punctuation">\</span>
--cloud-init user-data<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${USER_DATA}</span>&quot;</span> <span class="token punctuation">\</span>
--os-variant almalinux8 <span class="token punctuation">\</span>
--disk <span class="token string">&quot;<span class="token variable">${DISK}</span>&quot;</span> <span class="token punctuation">\</span>
--network <span class="token assign-left variable">network</span><span class="token operator">=</span>default,model<span class="token operator">=</span>virtio <span class="token punctuation">\</span>
--graphics none <span class="token punctuation">\</span>
--virt-type kvm

</code></pre></div><p>Start the VM - <code>virt-install &lt; 3.0.0</code></p> <p>Create a CloudInit seed iso file with User-Data and Meta-Data:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">touch</span> meta-data <span class="token comment"># empty meta-data file for no meta-data option</span>
$ genisoimage -output seed.iso -volid cidata -joliet -rock user-data meta-data
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token assign-left variable">VM_NAME</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84&quot;</span>
<span class="token assign-left variable">DISK</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84-snapshot.qcow2&quot;</span>
<span class="token assign-left variable">SEED_ISO</span><span class="token operator">=</span><span class="token string">&quot;seed.iso&quot;</span>


virt-install <span class="token punctuation">\</span>
--name <span class="token string">&quot;<span class="token variable">${VM_NAME}</span>&quot;</span> <span class="token punctuation">\</span>
--memory <span class="token number">2048</span> <span class="token punctuation">\</span>
--vcpus <span class="token number">2</span> <span class="token punctuation">\</span>
--import <span class="token punctuation">\</span>
--os-variant almalinux8 <span class="token punctuation">\</span>
--disk <span class="token string">&quot;<span class="token variable">${DISK}</span>&quot;</span> <span class="token punctuation">\</span>
--disk <span class="token string">&quot;<span class="token variable">${SEED_ISO}</span>&quot;</span>,device<span class="token operator">=</span>cdrom <span class="token punctuation">\</span>
--network <span class="token assign-left variable">network</span><span class="token operator">=</span>default,model<span class="token operator">=</span>virtio <span class="token punctuation">\</span>
--graphics none <span class="token punctuation">\</span>
--virt-type kvm

</code></pre></div><p>Get the IP address of the VM:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">virsh</span> domainifaddr <span class="token variable">$VM_NAME</span>
</code></pre></div><h2 id="static-ip"><a href="#static-ip" class="header-anchor">#</a> Static IP</h2> <p>You need a Cloud-init Meta-Data file for the static IP configuration.</p> <p><code>meta-data:</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">network-interfaces</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  iface eth0 inet static
  address 192.168.122.8
  network 192.168.122.0
  netmask 255.255.255.0
  broadcast 192.168.1.255
  gateway 192.168.122.1</span>
</code></pre></div><p>Because of a current <a href="https://bugs.launchpad.net/cloud-init/+bug/1225922" target="_blank" rel="noopener noreferrer">bug<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in cloud-init, static networking configurations are not automatically started. Instead, the default DHCP configuration remains active. A suggested workaround is to manually stop and restart the network interface via the <code>bootcmd</code>.</p> <p>Add these lines in the User-Data file.</p> <p><code>user-data:</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">#cloud-config</span>

<span class="token key atrule">bootcmd</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ifdown eth0
    <span class="token punctuation">-</span> ifup eth0
</code></pre></div><p>Create a VM with static IP:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token assign-left variable">VM_NAME</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84&quot;</span>
<span class="token assign-left variable">META_DATA</span><span class="token operator">=</span><span class="token string">&quot;meta-data&quot;</span>
<span class="token assign-left variable">USER_DATA</span><span class="token operator">=</span><span class="token string">&quot;user-data&quot;</span>
<span class="token assign-left variable">DISK</span><span class="token operator">=</span><span class="token string">&quot;wiki-almalinux84-snapshot.qcow2&quot;</span>

virt-install <span class="token punctuation">\</span>
--name <span class="token string">&quot;<span class="token variable">${VM_NAME}</span>&quot;</span> <span class="token punctuation">\</span>
--memory <span class="token number">2048</span> <span class="token punctuation">\</span>
--vcpus <span class="token number">2</span> <span class="token punctuation">\</span>
--import <span class="token punctuation">\</span>
--cloud-init meta-data<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${META_DATA}</span>&quot;</span>,user-data<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${USER_DATA}</span>&quot;</span> <span class="token punctuation">\</span>
--os-variant almalinux8 <span class="token punctuation">\</span>
--disk <span class="token variable">${DISK}</span> <span class="token punctuation">\</span>
--network <span class="token assign-left variable">network</span><span class="token operator">=</span>default,model<span class="token operator">=</span>virtio <span class="token punctuation">\</span>
--graphics none <span class="token punctuation">\</span>
--virt-type kvm

</code></pre></div><h2 id="repackage-cloud-image"><a href="#repackage-cloud-image" class="header-anchor">#</a> Repackage cloud image</h2> <p>shutdown VM:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">virsh</span> <span class="token function">shutdown</span> <span class="token variable">$VM_NAME</span>
</code></pre></div><p>Convert the snapshot to the full image without touching backing file(<code>AlmaLinux-8-GenericCloud-8.4-20210616.x86_64.qcow2</code>):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ qemu-img convert -c -O qcow2 doc-almalinux84-snapshot.qcow2 doc-almalinux84-base.qcow2
</code></pre></div><p>You can reset, unconfigure and inject files to the image with <code>libguestfs virt-sysprep</code>. See the upstream documentation for further <a href="https://libguestfs.org/virt-sysprep.1.html#options" target="_blank" rel="noopener noreferrer">option<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://libguestfs.org/virt-sysprep.1.html#operations" target="_blank" rel="noopener noreferrer">operations.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ virt-sysprep --format qcow2 -a doc-almalinux84-base.qcow2
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cloud/Generic-cloud.html" class="prev">
        Generic Cloud (cloud-init)
      </a></span> <span class="next"><a href="/cloud/OpenNebula.html">
        OpenNebula
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d57a9934.js" defer></script><script src="/assets/js/2.b4b7b8f8.js" defer></script><script src="/assets/js/19.05f283d6.js" defer></script>
  </body>
</html>
